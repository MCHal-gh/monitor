name: Planetum Monitor Scheduler (MoÅ¾nost A)

on:
  schedule:
    # SpustÃ­ se kaÅ¾dou hodinu v 15 minut po celÃ© hodinÄ› (Äas je UTC)
    - cron: '15 * * * *' 
  workflow_dispatch: # PovolÃ­ ruÄnÃ­ spuÅ¡tÄ›nÃ­ pro testovÃ¡nÃ­

jobs:
  run_scraper:
    runs-on: ubuntu-22.04 
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install Google Chrome/Chromium ğŸŒŸ
        # TENTO KROK NAHRADÃ APT-GET! Nainstaluje kompatibilnÃ­ Chrome a WebDriver
        id: install-chrome 
        uses: browser-actions/setup-chrome@latest
        # DÅ®LEÅ½ITÃ‰: UklÃ¡dÃ¡ cesty do vÃ½stupnÃ­ch promÄ›nnÃ½ch (chrome-path, driver-path)
      
      - name: Install Python dependencies
        run: |
          echo "Instaluji Selenium a dalÅ¡Ã­ knihovny..."
          pip install selenium requests beautifulsoup4

      - name: Run Python script ğŸš€
        # PÅ˜EDÃNÃ CEST K INSTALOVANÃ‰MU PROHLÃÅ½EÄŒI A OVLADAÄŒI
        env:
          GMAIL_PASSWORD: ${{ secrets.GMAIL_PASSWORD }}
          GMAIL_USER: ${{ secrets.GMAIL_USER }}
          # KlÃ­ÄovÃ© promÄ›nnÃ©, kterÃ© Python skript vyuÅ¾ije:
          CHROME_PATH: ${{ steps.install-chrome.outputs.chrome-path }}
          CHROME_DRIVER_PATH: ${{ steps.install-chrome.outputs.driver-path }}
        run: |
          echo "SpouÅ¡tÃ­m Python skript s dynamickÃ½mi cestami..."
          python planetum_kontrola_gmail_pythonanywhere.py 
          echo "Skript dokonÄen."
