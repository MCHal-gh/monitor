name: Kontrola Planetum PythonAnywhere

on:
  schedule:
    - cron: '0 0 * * *'  # SpouÅ¡tÃ­ se kaÅ¾dÃ½ den v pÅ¯lnoci
  workflow_dispatch:     # UmoÅ¾Åˆuje ruÄnÃ­ spuÅ¡tÄ›nÃ­ workflow

jobs:
  run_scraper:
    runs-on: ubuntu-22.04

    steps:
      - name: Checkout kÃ³d ğŸ“¦
        uses: actions/checkout@v4

      - name: NastavenÃ­ Python 3.11 ğŸ
        uses: actions/setup-python@v5
        with:
          python-version: 3.11

      - name: Instalace zÃ¡vislostÃ­ a Chromium ğŸ› ï¸
        run: |
          echo "Instaluji Selenium, Requests, BeautifulSoup a Chromium..."
          sudo apt-get update
          sudo apt-get install -y libxss1 libappindicator1 libindicator7 build-essential
          sudo apt-get install -y chromium
          pip install selenium requests beautifulsoup4

      - name: Kontrola verze Chromium ğŸŒ
        run: chromium --version

      - name: Run Python script ğŸš€
        env:
          GMAIL_USER: ${{ secrets.GMAIL_USER }}
          GMAIL_PASSWORD: ${{ secrets.GMAIL_PASSWORD }}
        run: |
          echo "SpouÅ¡tÃ­m Python skript (chromium binary: /usr/bin/chromium)..."
          python planetum_kontrola_gmail_pythonanywhere.py
          echo "Skript dokonÄen."
